import{a as y,b as x,c as I,d as S,e as w,f as k,l as E}from"./chunk-4GKWHBVM.js";import{a as P}from"./chunk-HFHVY7Q2.js";import{$ as g,Aa as M,F as c,I as f,J as u,N as m,T as s,U as o,V as i,_ as p,fa as l,ga as _,ia as v,ja as b,ka as C,xa as h,ya as O}from"./chunk-D7OHWEHL.js";function D(e,t){if(e&1&&(o(0,"th"),l(1),i()),e&2){let n=t.$implicit;c(),_(n)}}function V(e,t){if(e&1&&(o(0,"td"),l(1),i()),e&2){let n=t.$implicit,r=g().$implicit;c(),_(r[n])}}function L(e,t){if(e&1&&(o(0,"tr"),m(1,V,2,1,"td",9),i()),e&2){let n=g(2);c(),s("ngForOf",n.columns)}}function R(e,t){if(e&1&&(o(0,"table",8)(1,"thead")(2,"tr"),m(3,D,2,1,"th",9),i()(),o(4,"tbody"),m(5,L,2,1,"tr",9),i()()),e&2){let n=g();c(3),s("ngForOf",n.columns),c(2),s("ngForOf",n.data)}}function U(e,t){e&1&&(o(0,"p"),l(1,"No hay resultados."),i())}var N=class e{constructor(t){this.api=t}data=[];columns=[];filtro={vending_machine:""};ngOnInit(){this.cargar()}cargar(){this.api.get("reportes/inventario",this.filtro).subscribe({next:t=>{this.data=t,this.columns=t.length>0?Object.keys(t[0]):[]},error:t=>console.error("Error al cargar ventas",t)})}descargarCSV(){if(!this.data.length)return;let t=[];t.push(this.columns.join(","));for(let F of this.data){let T=this.columns.map(j=>`"${(""+(F[j]??"")).replace(/"/g,'""')}"`);t.push(T.join(","))}let n=t.join(`\r
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(r),a=document.createElement("a");a.href=d,a.download="reporte_ventas.csv",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(d)}static \u0275fac=function(n){return new(n||e)(f(P))};static \u0275cmp=u({type:e,selectors:[["app-inventario"]],decls:14,vars:3,consts:[[1,"ventas"],[1,"ventas__actions"],[1,"btn-download",3,"click"],[1,"filtros"],["type","text","name","vending","placeholder","vending",3,"ngModelChange","ngModel"],[3,"click"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(o(0,"section",0)(1,"h1"),l(2,"Inventario"),i(),o(3,"div",1)(4,"button",2),p("click",function(){return r.descargarCSV()}),l(5," \u{1F4E5} Descargar CSV "),i()(),o(6,"form",3)(7,"label"),l(8," Vending: "),o(9,"input",4),C("ngModelChange",function(a){return b(r.filtro.vending_machine,a)||(r.filtro.vending_machine=a),a}),i()(),o(10,"button",5),p("click",function(){return r.ngOnInit()}),l(11,"Buscar"),i()(),m(12,R,6,2,"table",6)(13,U,2,0,"p",7),i()),n&2&&(c(9),v("ngModel",r.filtro.vending_machine),c(3),s("ngIf",r.data.length>0),c(),s("ngIf",r.data.length===0))},dependencies:[E,k,y,x,I,w,S,M,h,O],styles:['@charset "UTF-8";.ventas[_ngcontent-%COMP%]{padding:1rem}.ventas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:1rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:center}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;text-align:left}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}.btn-download[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .6rem;font-size:.875rem;font-weight:500;color:#333;background-color:transparent;border:1px solid #ccc;border-radius:.5rem;cursor:pointer;transition:background-color .2s ease,border-color .2s ease}.btn-download[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bbb}.ventas__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}']})};export{N as a};
