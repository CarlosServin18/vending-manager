import{a as P,b as S,c as w,d as x,e as V,f as E,l as k}from"./chunk-4GKWHBVM.js";import{a as O}from"./chunk-HFHVY7Q2.js";import{$ as _,Aa as v,F as l,I as h,J as C,N as p,T as d,U as o,V as r,_ as u,fa as c,ga as b,ia as m,ja as g,ka as f,xa as M,ya as y}from"./chunk-D7OHWEHL.js";function N(a,n){if(a&1&&(o(0,"th"),c(1),r()),a&2){let i=n.$implicit;l(),b(i)}}function D(a,n){if(a&1&&(o(0,"td"),c(1),r()),a&2){let i=n.$implicit,t=_().$implicit;l(),b(t[i])}}function j(a,n){if(a&1&&(o(0,"tr"),p(1,D,2,1,"td",12),r()),a&2){let i=_(2);l(),d("ngForOf",i.columns)}}function L(a,n){if(a&1&&(o(0,"table",11)(1,"thead")(2,"tr"),p(3,N,2,1,"th",12),r()(),o(4,"tbody"),p(5,j,2,1,"tr",12),r()()),a&2){let i=_();l(3),d("ngForOf",i.columns),l(2),d("ngForOf",i.data)}}function B(a,n){a&1&&(o(0,"p"),c(1,"No hay resultados."),r())}var I=class a{constructor(n){this.api=n}data=[];columns=[];filtro={fecha:"",empleado:"",departamento:"",producto:""};ngOnInit(){this.cargar()}cargar(){this.api.get("reportes/ventas",this.filtro).subscribe({next:n=>{this.data=n,this.columns=n.length>0?Object.keys(n[0]):[]},error:n=>console.error("Error al cargar ventas",n)})}descargarCSV(){if(!this.data.length)return;let n=[];n.push(this.columns.join(","));for(let T of this.data){let W=this.columns.map(F=>`"${(""+(T[F]??"")).replace(/"/g,'""')}"`);n.push(W.join(","))}let i=n.join(`\r
`),t=new Blob([i],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(t),e=document.createElement("a");e.href=s,e.download="reporte_ventas.csv",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(s)}static \u0275fac=function(i){return new(i||a)(h(O))};static \u0275cmp=C({type:a,selectors:[["app-ventas"]],decls:23,vars:6,consts:[[1,"ventas"],[1,"ventas__actions"],[1,"btn-download",3,"click"],[1,"filtros"],["type","date","name","fecha","placeholder","fecha",3,"ngModelChange","ngModel"],["type","text","name","empleado","placeholder","empleado",3,"ngModelChange","ngModel"],["type","text","name","departamento","placeholder","departamento",3,"ngModelChange","ngModel"],["type","text","name","producto","placeholder","producto",3,"ngModelChange","ngModel"],[3,"click"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(i,t){i&1&&(o(0,"section",0)(1,"h1"),c(2,"Reporte de Ventas de Usuarios"),r(),o(3,"div",1)(4,"button",2),u("click",function(){return t.descargarCSV()}),c(5," \u{1F4E5} Descargar CSV "),r()(),o(6,"form",3)(7,"label"),c(8," Fecha: "),o(9,"input",4),f("ngModelChange",function(e){return g(t.filtro.fecha,e)||(t.filtro.fecha=e),e}),r()(),o(10,"label"),c(11," Empleado: "),o(12,"input",5),f("ngModelChange",function(e){return g(t.filtro.empleado,e)||(t.filtro.empleado=e),e}),r()(),o(13,"label"),c(14," Departamento: "),o(15,"input",6),f("ngModelChange",function(e){return g(t.filtro.departamento,e)||(t.filtro.departamento=e),e}),r()(),o(16,"label"),c(17," Producto: "),o(18,"input",7),f("ngModelChange",function(e){return g(t.filtro.producto,e)||(t.filtro.producto=e),e}),r()(),o(19,"button",8),u("click",function(){return t.ngOnInit()}),c(20,"Buscar"),r()(),p(21,L,6,2,"table",9)(22,B,2,0,"p",10),r()),i&2&&(l(9),m("ngModel",t.filtro.fecha),l(3),m("ngModel",t.filtro.empleado),l(3),m("ngModel",t.filtro.departamento),l(3),m("ngModel",t.filtro.producto),l(3),d("ngIf",t.data.length>0),l(),d("ngIf",t.data.length===0))},dependencies:[k,E,P,S,w,V,x,v,M,y],styles:['@charset "UTF-8";.ventas[_ngcontent-%COMP%]{padding:1rem}.ventas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:1rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:center}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;text-align:left}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}.btn-download[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .6rem;font-size:.875rem;font-weight:500;color:#333;background-color:transparent;border:1px solid #ccc;border-radius:.5rem;cursor:pointer;transition:background-color .2s ease,border-color .2s ease}.btn-download[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bbb}.ventas__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}']})};export{I as a};
