import{a as j}from"./chunk-RUBEWZIY.js";import{a as k,b as N,c as I,d as U,e as F,f as T,l as h}from"./chunk-4GKWHBVM.js";import{a as E}from"./chunk-HFHVY7Q2.js";import{$ as p,Aa as C,F as l,I as v,J as y,K as x,Ka as L,N as m,T as d,U as i,V as a,_,fa as c,ga as b,ia as u,ja as g,ka as f,q as P,xa as S,ya as w}from"./chunk-D7OHWEHL.js";function K(e,t){if(e&1&&(i(0,"th"),c(1),a()),e&2){let n=t.$implicit;l(),b(n)}}function Q(e,t){if(e&1&&(i(0,"td"),c(1),a()),e&2){let n=t.$implicit,r=p().$implicit;l(),b(r[n])}}function Y(e,t){if(e&1&&(i(0,"tr"),m(1,Q,2,1,"td",11),a()),e&2){let n=p(2);l(),d("ngForOf",n.columns)}}function Z(e,t){if(e&1&&(i(0,"table",10)(1,"thead")(2,"tr"),m(3,K,2,1,"th",11),a()(),i(4,"tbody"),m(5,Y,2,1,"tr",11),a()()),e&2){let n=p();l(3),d("ngForOf",n.columns),l(2),d("ngForOf",n.data)}}function $(e,t){e&1&&(i(0,"p"),c(1,"No hay resultados."),a())}var M=class e{constructor(t){this.api=t}data=[];columns=[];filtro={fecha:"",empleado:"",departamento:""};ngOnInit(){this.cargar()}cargar(){this.api.get("reportes/usuario",this.filtro).subscribe({next:t=>{this.data=t,this.columns=t.length>0?Object.keys(t[0]):[]},error:t=>console.error("Error al cargar ventas",t)})}descargarCSV(){if(!this.data.length)return;let t=[];t.push(this.columns.join(","));for(let R of this.data){let W=this.columns.map(X=>`"${(""+(R[X]??"")).replace(/"/g,'""')}"`);t.push(W.join(","))}let n=t.join(`\r
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="reporte_ventas.csv",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}static \u0275fac=function(n){return new(n||e)(v(E))};static \u0275cmp=y({type:e,selectors:[["app-usuarios"]],decls:20,vars:5,consts:[[1,"ventas"],[1,"ventas__actions"],[1,"btn-download",3,"click"],[1,"filtros"],["type","date","name","fecha","placeholder","fecha",3,"ngModelChange","ngModel"],["type","text","name","empleado","placeholder","empleado",3,"ngModelChange","ngModel"],["type","text","name","departamento","placeholder","departamento",3,"ngModelChange","ngModel"],[3,"click"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(i(0,"section",0)(1,"h1"),c(2,"Reporte de Ventas de Usuarios"),a(),i(3,"div",1)(4,"button",2),_("click",function(){return r.descargarCSV()}),c(5," \u{1F4E5} Descargar CSV "),a()(),i(6,"form",3)(7,"label"),c(8," Fecha: "),i(9,"input",4),f("ngModelChange",function(o){return g(r.filtro.fecha,o)||(r.filtro.fecha=o),o}),a()(),i(10,"label"),c(11," Empleado: "),i(12,"input",5),f("ngModelChange",function(o){return g(r.filtro.empleado,o)||(r.filtro.empleado=o),o}),a()(),i(13,"label"),c(14," Departamento: "),i(15,"input",6),f("ngModelChange",function(o){return g(r.filtro.departamento,o)||(r.filtro.departamento=o),o}),a()(),i(16,"button",7),_("click",function(){return r.ngOnInit()}),c(17,"Buscar"),a()(),m(18,Z,6,2,"table",8)(19,$,2,0,"p",9),a()),n&2&&(l(9),u("ngModel",r.filtro.fecha),l(3),u("ngModel",r.filtro.empleado),l(3),u("ngModel",r.filtro.departamento),l(3),d("ngIf",r.data.length>0),l(),d("ngIf",r.data.length===0))},dependencies:[h,T,k,N,I,F,U,C,S,w],styles:['@charset "UTF-8";.ventas[_ngcontent-%COMP%]{padding:1rem}.ventas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:1rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:center}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;text-align:left}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}.btn-download[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .6rem;font-size:.875rem;font-weight:500;color:#333;background-color:transparent;border:1px solid #ccc;border-radius:.5rem;cursor:pointer;transition:background-color .2s ease,border-color .2s ease}.btn-download[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bbb}.ventas__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}']})};function tt(e,t){if(e&1&&(i(0,"th"),c(1),a()),e&2){let n=t.$implicit;l(),b(n)}}function et(e,t){if(e&1&&(i(0,"td"),c(1),a()),e&2){let n=t.$implicit,r=p().$implicit;l(),b(r[n])}}function nt(e,t){if(e&1&&(i(0,"tr"),m(1,et,2,1,"td",10),a()),e&2){let n=p(2);l(),d("ngForOf",n.columns)}}function ot(e,t){if(e&1&&(i(0,"table",9)(1,"thead")(2,"tr"),m(3,tt,2,1,"th",10),a()(),i(4,"tbody"),m(5,nt,2,1,"tr",10),a()()),e&2){let n=p();l(3),d("ngForOf",n.columns),l(2),d("ngForOf",n.data)}}function rt(e,t){e&1&&(i(0,"p"),c(1,"No hay resultados."),a())}var O=class e{constructor(t){this.api=t}data=[];columns=[];filtro={Nombre:"",producto:""};ngOnInit(){this.cargar()}cargar(){this.api.get("reportes/productos",this.filtro).subscribe({next:t=>{this.data=t,this.columns=t.length>0?Object.keys(t[0]):[]},error:t=>console.error("Error al cargar ventas",t)})}descargarCSV(){if(!this.data.length)return;let t=[];t.push(this.columns.join(","));for(let R of this.data){let W=this.columns.map(X=>`"${(""+(R[X]??"")).replace(/"/g,'""')}"`);t.push(W.join(","))}let n=t.join(`\r
`),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download="reporte_ventas.csv",o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}static \u0275fac=function(n){return new(n||e)(v(E))};static \u0275cmp=y({type:e,selectors:[["app-productos-x-empleado"]],decls:17,vars:4,consts:[[1,"ventas"],[1,"ventas__actions"],[1,"btn-download",3,"click"],[1,"filtros"],["type","text","name","empleado","placeholder","empleado",3,"ngModelChange","ngModel"],["type","text","name","producto","placeholder","producto",3,"ngModelChange","ngModel"],[3,"click"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"]],template:function(n,r){n&1&&(i(0,"section",0)(1,"h1"),c(2,"Reporte por Productos"),a(),i(3,"div",1)(4,"button",2),_("click",function(){return r.descargarCSV()}),c(5," \u{1F4E5} Descargar CSV "),a()(),i(6,"form",3)(7,"label"),c(8," Empleado "),i(9,"input",4),f("ngModelChange",function(o){return g(r.filtro.Nombre,o)||(r.filtro.Nombre=o),o}),a()(),i(10,"label"),c(11," Producto: "),i(12,"input",5),f("ngModelChange",function(o){return g(r.filtro.producto,o)||(r.filtro.producto=o),o}),a()(),i(13,"button",6),_("click",function(){return r.ngOnInit()}),c(14,"Buscar"),a()(),m(15,ot,6,2,"table",7)(16,rt,2,0,"p",8),a()),n&2&&(l(9),u("ngModel",r.filtro.Nombre),l(3),u("ngModel",r.filtro.producto),l(3),d("ngIf",r.data.length>0),l(),d("ngIf",r.data.length===0))},dependencies:[h,T,k,N,I,F,U,C,S,w],styles:['@charset "UTF-8";.ventas[_ngcontent-%COMP%]{padding:1rem}.ventas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:1rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;align-items:center}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.ventas[_ngcontent-%COMP%]   .filtros[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;text-align:left}.ventas[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}.btn-download[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .6rem;font-size:.875rem;font-weight:500;color:#333;background-color:transparent;border:1px solid #ccc;border-radius:.5rem;cursor:pointer;transition:background-color .2s ease,border-color .2s ease}.btn-download[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bbb}.ventas__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:1rem}']})};var it=[{path:"ventas",component:j},{path:"usuarios",component:M},{path:"productos",component:O}],D=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=x({type:e});static \u0275inj=P({imports:[L.forChild(it),L]})};var B=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=x({type:e});static \u0275inj=P({imports:[C,D,j,M,O,h]})};export{B as UsuariosModule};
